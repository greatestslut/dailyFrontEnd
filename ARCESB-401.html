<!DOCTYPE html>
<html lang="en">
  

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>

</head>

<body>
  <a href="https://www.baidu.com/">baidu</a>
  <a onclick="check()" href="#">fake</a>




</body>
<script>
  //this is a combined event,includs confirmSSS
  window.onbeforeunload = function () {
    return "I am gonna leave";
  };
  alert("1")
  // because the dom's render sequence is from top to bottom, 
  // maybe we need to bind the callback function for the element 
  // which is not in the current page, so we should just keep the 
  // callback function in the  $(document).ready()
  $(document).ready(function () {
    check = function () {
      // 1.try to programatically trigger the window.onbeforeunload event
      // 2.understand the essense of the window.onbeforeunload event
      // when the onbeforeunload triggers,the return value will decide
      // if the F5 or new location will be redirected or not.
      // F5 or new url will trigger

      // Superficially,when you click or F5 ,the confirm will be called,
      // then decide whether the following steps will be taken
      // decompose them into atomic step and then bring them together
      
      if (window.onbeforeunload && window.onbeforeunload()) {
        //when the return value has sth to do with the 
        return confirm("I am gonna leave");
      }
    }
    alert("2")
  });

  $(document).ready(function () {
    alert("3")
  });
</script>

</html>